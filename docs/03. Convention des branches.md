# üå≥ Convention de Nommage des Branches Git

Pour garantir une gestion propre du code source et faciliter la collaboration, nous adoptons une convention stricte pour le nommage des branches.

## üèóÔ∏è Structure Globale

Chaque nom de branche doit suivre ce format pr√©cis :

`type/contexte/description-courte`

- **`type`** : La nature de la modification (voir liste ci-dessous).
- **`contexte`** : (Optionnel mais recommand√©) Le scope touch√© (`front`, `back`, `api`, `auth`, etc.) ou le num√©ro du ticket Jira/Trello (ex: `JIRA-123`).
- **`description-courte`** : Un r√©sum√© en 2-3 mots, en **kebab-case** (minuscules, s√©par√©es par des tirets).

## üè∑Ô∏è Les Types Autoris√©s

| Type           | Description                                                   | Exemples                           |
|----------------|---------------------------------------------------------------|------------------------------------|
| **`feat`**     | Nouvelle fonctionnalit√© ou √©volution majeure.                 | `feature/front/login-page`         |
| **`fix`**      | Correction de bug.                                            | `fix/back/navbar-responsiveness`   |
| **`hotfix`**   | Correction urgente en production (contourne le cycle normal). | `hotfix/api/security-patch`        |
| **`docs`**     | Modification de la documentation uniquement.                  | `docs/readme-update`               |
| **`chore`**    | Maintenance technique (config, build) sans impact m√©tier.     | `chore/docker/update-node-version` |
| **`refactor`** | R√©√©criture de code sans changement de fonctionnalit√©.         | `refactor/front/auth-service`      |
| **`test`**     | Ajout ou modification de tests.                               | `test/e2e/login-flow`              |
| **`cicd`**     | Maintenance GitHub, Docker, d√©ploiement (compose, CI/CD).     | `cicd/docker/compose`              |
| **`style`**    | Am√©lioration du style.                                        | `style/login/forms`                |

## üö¶ Le Workflow (Git Flow Simplifi√©)

### 1. Branches Principales (Prot√©g√©es)

Ces branches existent en permanence. **Interdiction de pousser directement dessus** (Merge Request obligatoire).

- `master` : Code de **production**. Stable, test√©, d√©ployable √† tout moment.
- **`develop`**: Code de **d√©veloppement**. C'est ici que toutes les fonctionnalit√©s sont fusionn√©es avant la release.

### 2. Cycle de vie d'une fonctionnalit√©

1. **Cr√©ation** : Je pars de `develop` pour cr√©er ma branche.

    ```
    git checkout develop
    git pull origin develop
    git checkout -b feature/front/ma-description

    ```

2. **D√©veloppement** : Je fais mes commits (en respectant la convention de commits !).
3. **Fusion** : Je cr√©e une **Pull Request (PR)** ou **Merge Request (MR)** vers `develop`.
    - _Titre de la PR_ : `feat(scope): Description claire`
    - _Revue_ : Un coll√®gue doit valider le code.
4. **Suppression** : Une fois la PR fusionn√©e dans develop, la branche `feature/...` est supprim√©e.

## ‚úÖ Exemples Concrets

### ‚úÖ Bons Noms

- `feature/front/user-profile`
- `fix/ticket-42/login-button`
- `chore/docker/upgrade-postgres`
- `docs/api/add-endpoints`

### ‚ùå Mauvais Noms (√Ä √©viter)

- `lucas-dev` (Ne dit pas ce que √ßa fait)
- `mise-a-jour` (Trop vague)
- `fix_bug` (Mauvais format, pas de type clair)
- `Feature/Auth` (Pas de majuscules !)

## üõ†Ô∏è Astuce Configuration (Hooks)

Pour emp√™cher physiquement les d√©veloppeurs de commiter sur une branche mal nomm√©e, nous utilisons un **Hook Git**.

### 1. Installation de Husky (√† la racine)

```
npm install --save-dev husky
npx husky init

```

### 2. Cr√©ation du Hook `pre-commit`

Cr√©ation du fichier `.husky/pre-commit` pour v√©rifier le nom de la branche avant chaque commit.

```jsx
#!/bin/sh

echo "------------------------------------------------"
echo "ü§ñ HUSKY : V√©rification du nom de la branche..."
echo "------------------------------------------------"

# R√©cup√©rer le nom de la branche
branch_name=$(git rev-parse --abbrev-ref HEAD)

echo "Branche actuelle : '$branch_name'"

# Liste des branches ignor√©es
if [ "$branch_name" = "master" ] || [ "$branch_name" = "main" ] || [ "$branch_name" = "develop" ]; then
echo "‚úÖ Branche prot√©g√©e/principale. V√©rification ignor√©e."
exit 0
fi

# Regex de validation
valid_branch_regex="^(feat|fix|hotfix|docs|chore|style|refactor|test|cicd)\/[a-z0-9-]+(\/[a-z0-9-]+)?$"

if ! echo "$branch_name" | grep -Eq "$valid_branch_regex"; then
echo "‚ùå ERREUR : Nom de branche invalide !"
echo "------------------------------------------------"
echo "Le nom '$branch_name' ne respecte pas la convention."
echo "Format attendu : type/contexte/description-courte"
echo "Exemples valides :"
echo "  - feat/front/login-page"
echo "  - fix/api/user-controller"
echo "  - chore/docker/setup"
echo "------------------------------------------------"
echo "üö´ COMMIT BLOQU√â."
exit 1
fi

echo "‚úÖ Nom de branche valide. Commit autoris√©."
exit 0
```

### 3. R√©sultat

Si un d√©veloppeur essaie de commiter sur une branche nomm√©e `toto-test`, le commit sera **refus√©** avec un message d'erreur explicite.
